filebeat.inputs:
  - type: log
    enabled: true
{% if IS_STRUCTURED %}
    json.keys_under_root: true
{% endif %}
    paths:
      - {{FILENAME}}
##ilm is nothing but INDEX LIFE MANAGEMENT which tells us how the index should filebeat so we have to disable it manually and this session we changing the name of log

{% if IS_STRUCTURED %}
setup.ilm.enabled: false
setup.template.name: "{{COMPONENT}}"
setup.template.pattern: "{{COMPONENT}}-*"
output.elasticsearch:
  hosts: ["172.31.76.197:9200"]
  index: "{{COMPONENT}-%{+yyyy.MM.dd}"
{% endif %}

{% if not IS_STRUCTURED %}
output.logstash:
 hosts: ["172.31.76.197:5044"]
{% endif %}

filebeat.config.modules:
  path: ${path.config}/modules.d/*.yml
  reload.enabled: false

setup.template.settings:
 index.number_of_shards: 1